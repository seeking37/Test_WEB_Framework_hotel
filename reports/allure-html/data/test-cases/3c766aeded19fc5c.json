{"uid":"3c766aeded19fc5c","name":"输入验证测试","fullName":"testcase.test_reserve.TestReserveParameterized#test_input_validation","historyId":"084b9ba095076a3ce61a6a274f61e3cd","time":{"start":1751190895076,"stop":1751190896220,"duration":1144},"description":"测试输入验证","descriptionHtml":"<p>测试输入验证</p>\n","status":"failed","statusMessage":"AssertionError: reserve_date 错误消息不匹配\nassert '' == 'Please enter...ter tomorrow.'\n  - Please enter a date after tomorrow.","statusTrace":"self = <testcase.test_reserve.TestReserveParameterized object at 0x00000235FEBE16A0>\ndriver = <selenium.webdriver.chrome.webdriver.WebDriver (session=\"22079006a9166cc6f08307e84b4426a1\")>\ntest_case = {'description': '小于最小值应显示错误', 'expected_messages': {'head_count': 'Value must be greater than or equal to 1.', 'reserv...tomorrow.', 'reserve_term': 'Value must be greater than or equal to 1.'}, 'head_count': '0', 'id': 'small_values', ...}\n\n    @allure.story(\"输入验证\")\n    @allure.title(\"输入验证测试\")\n    @pytest.mark.parametrize(\"test_case\", Utils.get_test_cases('../data/reserve_cases.yaml', 'input_validation_cases'), ids=lambda x: x['id'])\n    @pytest.mark.order(2)\n    def test_input_validation(self, driver, test_case):\n        \"\"\"测试输入验证\"\"\"\n        with allure.step(f\"执行测试用例: {test_case['description']}\"):\n            # 设置为未登录用户场景\n            test_case_setup = {'is_logged_in': False, 'plan_title': test_case['plan_title']}\n            reserve_page = self._setup_reserve_page(test_case_setup)\n    \n            # 处理特殊日期标记\n            reserve_date = self._get_formatted_date(test_case['reserve_date'])\n    \n            # 设置输入值\n            reserve_page.set_reserve_date(reserve_date)\n            reserve_page.set_reserve_term(test_case['reserve_term'])\n            reserve_page.set_head_count(test_case['head_count'])\n            reserve_page.set_username(test_case['username'])  # 移动焦点\n    \n            # 验证错误消息\n            with allure.step(\"验证错误消息\"):\n                for field_name, expected_msg in test_case['expected_messages'].items():\n                    method_name = f\"get_{field_name}_message\"\n                    actual_msg = getattr(reserve_page, method_name)()\n                    if expected_msg is not None:\n>                       assert actual_msg == expected_msg, f\"{field_name} 错误消息不匹配\"\nE                       AssertionError: reserve_date 错误消息不匹配\nE                       assert '' == 'Please enter...ter tomorrow.'\nE                         - Please enter a date after tomorrow.\n\ntestcase\\test_reserve.py:169: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"driver","time":{"start":1751190885828,"stop":1751190887583,"duration":1755},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"attachmentStep":false,"stepsCount":0,"hasContent":false},{"name":"setup_driver","time":{"start":1751190895050,"stop":1751190895075,"duration":25},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"attachmentStep":false,"stepsCount":0,"hasContent":false},{"name":"clear_cookies","time":{"start":1751190895050,"stop":1751190895050,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"attachmentStep":false,"stepsCount":0,"hasContent":false},{"name":"_xunit_setup_method_fixture_TestReserveParameterized","time":{"start":1751190895050,"stop":1751190895050,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"attachmentStep":false,"stepsCount":0,"hasContent":false}],"testStage":{"description":"测试输入验证","status":"failed","statusMessage":"AssertionError: reserve_date 错误消息不匹配\nassert '' == 'Please enter...ter tomorrow.'\n  - Please enter a date after tomorrow.","statusTrace":"self = <testcase.test_reserve.TestReserveParameterized object at 0x00000235FEBE16A0>\ndriver = <selenium.webdriver.chrome.webdriver.WebDriver (session=\"22079006a9166cc6f08307e84b4426a1\")>\ntest_case = {'description': '小于最小值应显示错误', 'expected_messages': {'head_count': 'Value must be greater than or equal to 1.', 'reserv...tomorrow.', 'reserve_term': 'Value must be greater than or equal to 1.'}, 'head_count': '0', 'id': 'small_values', ...}\n\n    @allure.story(\"输入验证\")\n    @allure.title(\"输入验证测试\")\n    @pytest.mark.parametrize(\"test_case\", Utils.get_test_cases('../data/reserve_cases.yaml', 'input_validation_cases'), ids=lambda x: x['id'])\n    @pytest.mark.order(2)\n    def test_input_validation(self, driver, test_case):\n        \"\"\"测试输入验证\"\"\"\n        with allure.step(f\"执行测试用例: {test_case['description']}\"):\n            # 设置为未登录用户场景\n            test_case_setup = {'is_logged_in': False, 'plan_title': test_case['plan_title']}\n            reserve_page = self._setup_reserve_page(test_case_setup)\n    \n            # 处理特殊日期标记\n            reserve_date = self._get_formatted_date(test_case['reserve_date'])\n    \n            # 设置输入值\n            reserve_page.set_reserve_date(reserve_date)\n            reserve_page.set_reserve_term(test_case['reserve_term'])\n            reserve_page.set_head_count(test_case['head_count'])\n            reserve_page.set_username(test_case['username'])  # 移动焦点\n    \n            # 验证错误消息\n            with allure.step(\"验证错误消息\"):\n                for field_name, expected_msg in test_case['expected_messages'].items():\n                    method_name = f\"get_{field_name}_message\"\n                    actual_msg = getattr(reserve_page, method_name)()\n                    if expected_msg is not None:\n>                       assert actual_msg == expected_msg, f\"{field_name} 错误消息不匹配\"\nE                       AssertionError: reserve_date 错误消息不匹配\nE                       assert '' == 'Please enter...ter tomorrow.'\nE                         - Please enter a date after tomorrow.\n\ntestcase\\test_reserve.py:169: AssertionError","steps":[{"name":"执行测试用例: 小于最小值应显示错误","time":{"start":1751190895076,"stop":1751190896220,"duration":1144},"status":"failed","statusMessage":"AssertionError: reserve_date 错误消息不匹配\nassert '' == 'Please enter...ter tomorrow.'\n  - Please enter a date after tomorrow.\n","statusTrace":"  File \"C:\\tocode\\Project\\cursor\\hotel-example\\testcase\\test_reserve.py\", line 169, in test_input_validation\n    assert actual_msg == expected_msg, f\"{field_name} 错误消息不匹配\"\n","steps":[{"name":"设置预订日期","time":{"start":1751190895794,"stop":1751190895904,"duration":110},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"date","value":"'06/29/2025'"}],"shouldDisplayMessage":false,"attachmentsCount":0,"attachmentStep":false,"stepsCount":0,"hasContent":true},{"name":"设置预订天数","time":{"start":1751190895904,"stop":1751190896075,"duration":171},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"term","value":"'0'"}],"shouldDisplayMessage":false,"attachmentsCount":0,"attachmentStep":false,"stepsCount":0,"hasContent":true},{"name":"设置人数","time":{"start":1751190896075,"stop":1751190896117,"duration":42},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"head_count","value":"'0'"}],"shouldDisplayMessage":false,"attachmentsCount":0,"attachmentStep":false,"stepsCount":0,"hasContent":true},{"name":"设置用户名","time":{"start":1751190896117,"stop":1751190896206,"duration":89},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"username","value":"'the tester'"}],"shouldDisplayMessage":false,"attachmentsCount":0,"attachmentStep":false,"stepsCount":0,"hasContent":true},{"name":"验证错误消息","time":{"start":1751190896206,"stop":1751190896220,"duration":14},"status":"failed","statusMessage":"AssertionError: reserve_date 错误消息不匹配\nassert '' == 'Please enter...ter tomorrow.'\n  - Please enter a date after tomorrow.\n","statusTrace":"  File \"C:\\tocode\\Project\\cursor\\hotel-example\\testcase\\test_reserve.py\", line 169, in test_input_validation\n    assert actual_msg == expected_msg, f\"{field_name} 错误消息不匹配\"\n","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"attachmentsCount":0,"attachmentStep":false,"stepsCount":0,"hasContent":true}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"attachmentStep":false,"stepsCount":5,"hasContent":true}],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"attachmentsCount":0,"attachmentStep":false,"stepsCount":6,"hasContent":true},"afterStages":[{"name":"_xunit_setup_method_fixture_TestReserveParameterized::0","time":{"start":1751190896235,"stop":1751190896281,"duration":46},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"attachmentStep":false,"stepsCount":0,"hasContent":false},{"name":"clear_cookies::0","time":{"start":1751190896282,"stop":1751190896292,"duration":10},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"attachmentStep":false,"stepsCount":0,"hasContent":false},{"name":"driver::0","time":{"start":1751190909676,"stop":1751190911885,"duration":2209},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"attachmentStep":false,"stepsCount":0,"hasContent":false}],"labels":[{"name":"feature","value":"酒店预订功能（参数化）"},{"name":"story","value":"输入验证"},{"name":"tag","value":"order(2)"},{"name":"parentSuite","value":"testcase"},{"name":"suite","value":"test_reserve"},{"name":"subSuite","value":"TestReserveParameterized"},{"name":"host","value":"SQG"},{"name":"thread","value":"10800-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"testcase.test_reserve"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"test_case","value":"{'id': 'small_values', 'description': '小于最小值应显示错误', 'plan_title': 'Plan with special offers', 'reserve_date': 'today', 'reserve_term': '0', 'head_count': '0', 'username': 'the tester', 'expected_messages': {'reserve_date': 'Please enter a date after tomorrow.', 'reserve_term': 'Value must be greater than or equal to 1.', 'head_count': 'Value must be greater than or equal to 1.'}}"}],"links":[],"hidden":true,"retry":true,"extra":{"categories":[],"tags":["order(2)"]},"source":"3c766aeded19fc5c.json","parameterValues":["{'id': 'small_values', 'description': '小于最小值应显示错误', 'plan_title': 'Plan with special offers', 'reserve_date': 'today', 'reserve_term': '0', 'head_count': '0', 'username': 'the tester', 'expected_messages': {'reserve_date': 'Please enter a date after tomorrow.', 'reserve_term': 'Value must be greater than or equal to 1.', 'head_count': 'Value must be greater than or equal to 1.'}}"]}